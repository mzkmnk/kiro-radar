# 実装計画: Spec ファイルパーサー

- [x] 1. データ構造の定義

  - Task 構造体を作成
  - 必要なフィールド（title, completed, level）を定義
  - _要件: 2.1, 2.2, 2.3, 2.4_

- [ ] 2. ファイル読み込み機能の実装

  - `read_spec_file` 関数を実装
  - `std::fs::read_to_string` を使用
  - エラーハンドリングを追加
  - _要件: 1.1, 1.2, 1.3_

- [ ] 2.1 プロパティテストを作成

  - **プロパティ 1: ファイル読み込みの一貫性**
  - **検証: 要件 1.1**

- [ ] 3. Markdown パーサーの実装

  - `parse_tasks` 関数を実装
  - 正規表現でチェックボックスパターンをマッチ
  - タスクの完了状態を判定
  - インデントレベルを計算
  - _要件: 2.1, 2.2, 2.3, 2.4_

- [ ] 3.1 プロパティテストを作成

  - **プロパティ 2: タスク解析の完全性**
  - **検証: 要件 2.1**

- [ ] 3.2 プロパティテストを作成

  - **プロパティ 3: 完了状態の正確性**
  - **検証: 要件 2.2, 2.3**

- [ ] 3.3 プロパティテストを作成

  - **プロパティ 4: 階層構造の保持**
  - **検証: 要件 2.4**

- [ ] 4. 進捗計算機能の実装

  - `calculate_progress` 関数を実装
  - 完了タスク数をカウント
  - 総タスク数をカウント
  - 進捗率を計算（0.0〜1.0）
  - _要件: 3.1, 3.2, 3.3_

- [ ] 4.1 プロパティテストを作成

  - **プロパティ 5: 進捗計算の正確性**
  - **検証: 要件 3.1**

- [ ] 5. ユニットテストの作成

  - 空ファイルのテスト
  - 存在しないファイルのテスト
  - 全完了タスクのテスト（100%）
  - 全未完了タスクのテスト（0%）
  - _要件: 1.3, 3.2, 3.3_

- [ ] 6. チェックポイント - すべてのテストが通ることを確認
  - すべてのテストが通ることを確認し、問題があればユーザーに質問する
